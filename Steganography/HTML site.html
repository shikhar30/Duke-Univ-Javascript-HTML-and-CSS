<html><body>
  <h1>Steganography</h1>
  <div> Steganography is the practice of concealing messages or information within other non-secret text or data.</div>
  <h3>Original Images</h3>
  <table>
    <tr><th>Image</th><th>Image to hide</th></tr>
    <tr><td><img src="https://farm8.staticflickr.com/7794/26983134942_65fb7676d9_m.jpg"></td>
    <td><img src="https://farm8.staticflickr.com/7279/26983136532_fa65cb4e65_m.jpg" width=75%></td>
    </tr></table>
  
  <table>
    <tr><th>Image inside an image</th><th>Extracted Image</th></tr>
      <tr><td><img src="https://farm8.staticflickr.com/7493/27044602456_318dbdc90c_m.jpg"></td>
        <td><img src="https://farm8.staticflickr.com/7450/26475981903_bb4e38526b_m.jpg"</td></tr>
  
  
  </table>
  <h3>Algorithm</h3>
  
  <p>
    we define various fucntions, newpixelvalue <em>newpv</em>, where the pixels are added to check it is not greater than 255, else it will give an error.  
  </p>
  <p>Then define <em>pixchange, bitToUse,chop2Hide ,combine and shift</em> these functions are similar as they state, to define the number of bits to hide, to combine the pixels from one image to another. chop the bigger image to fit into the small one, shift function is generally used to shift the 4 bits to the new location and to take up the 4 bits of the new image.</p>
  
  <p>The example of an extracted image is displayed</p>
  
  
  <p>We can manually decide the number of bits to hide. It can be done from 2-8, at 1 it gives an error generated by npv function.</p>
  
 
  <h3>Code</h3>
  <pre>
function newpv(va,vb){
    var answer=va+vb;
    if (va+vb>255) print("error:RGB value cannot be greater than 255"); 
    return answer;
}


function pixchange(pixval,bit){
    var x = Math.floor(pixval/bit) * bit;
    return x;
}
function bitToUse(bit){
    result = Math.pow(2,bit);
    return result;
}

function chop2hide(image,pix){
    bit=bitToUse(pix);
    for(var px of image.values()){
        px.setRed(pixchange(px.getRed(),bit));
        px.setGreen(pixchange(px.getGreen(),bit));
        px.setBlue(pixchange(px.getBlue(),bit));
    }
    return image;
}

  function combine(a,b){
    var n = new SimpleImage (a.getWidth(),a.getHeight());
    for (var pa of a.values()){
        var x = pa.getX();
        var y = pa.getY();
        var pb = b.getPixel (x,y);
        var np = n.getPixel (x,y);
        np.setRed(newpv(pa.getRed(),pb.getRed()));
        np.setGreen(newpv(pa.getGreen(),pb.getGreen()));
        np.setBlue(newpv(pa.getBlue(),pb.getBlue()));
    }
    return n;
}
function abcd(n,bit)
{
    var ab=(n-Math.floor(n/bit)*bit)*bit;
    return ab;
}

function extract(image,bit)
{
for(var pix of image.values())
{
    pix.setRed(abcd(pix.getRed(),bit));
    pix.setGreen(abcd(pix.getGreen(),bit));
    pix.setBlue(abcd(pix.getBlue(),bit));
}
return image;
}



function shift(im,bit){
    bit=bitToUse(bit);
  var nim = new SimpleImage(im.getWidth(), 
                            im.getHeight());
  for(var px of im.values()){
    var x = px.getX();
    var y = px.getY();
    var npx = nim.getPixel(x,y);
    npx.setRed(Math.floor(px.getRed()/bit));
    npx.setGreen(Math.floor(px.getGreen()/bit));
    npx.setBlue(Math.floor(px.getBlue()/bit));
  }
  return nim;
}
var start = new SimpleImage("smalllion.jpg");
var hide = new SimpleImage("usain.jpg");


bitToHide=4;
start = chop2hide(start,bitToHide);
hide = shift(hide,bitToHide);
var combi=new SimpleImage(start.getWidth(),hide.getHeight());
var taken=new SimpleImage(start.getWidth(),hide.getHeight());
combi=combine(start,hide);
print(combi);
taken=extract(combi,bitToHide);
print(taken);

</pre>
  
  
  
  
  
  </body></html>